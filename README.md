# EducationHub

Образовательная платформа с каталогом курсов, системой обучения и административной панелью.

## Технологический стек

- **Frontend/Backend**: Next.js 15.5.5 (App Router)
- **Язык**: TypeScript 5
- **База данных**: PostgreSQL + Drizzle ORM
- **Аутентификация**: NextAuth.js 4.24.11
- **State Management**: Zustand 5.0.8, TanStack Query 5
- **UI**: Tailwind CSS 4
- **Валидация**: Zod 4.1.12

## Установка и запуск

### 1. Установка зависимостей

```bash
pnpm install
```

### 2. Настройка переменных окружения

Создайте файл `.env.local`:

```env
DATABASE_URL=postgresql://user:password@localhost:5432/educationhub
NEXTAUTH_SECRET=your-secret-key-here
NEXTAUTH_URL=http://localhost:3000

# Gmail SMTP настройки
GMAIL_USER=your-email@gmail.com
GMAIL_APP_PASSWORD=your-app-password
```

### Настройка Gmail для отправки писем

1. Включите двухфакторную аутентификацию в вашем Google аккаунте
2. Перейдите в [Настройки аккаунта Google](https://myaccount.google.com/)
3. Выберите "Безопасность" → "Двухэтапная аутентификация"
4. После включения, перейдите в "Пароли приложений"
5. Создайте новый пароль приложения для "Почта" и выберите устройство
6. Скопируйте сгенерированный пароль и используйте его как `GMAIL_APP_PASSWORD`

**Важно:** Используйте именно App Password, а не обычный пароль от Gmail!

### 3. Применение миграций

```bash
pnpm drizzle-kit push
```

Или для создания новой миграции:

```bash
pnpm drizzle-kit generate
pnpm drizzle-kit migrate
```

### 4. Запуск проекта

#### Режим разработки (Development)

```bash
pnpm dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

#### Режим продакшена (Production)

Для проверки работы сайта в продакшен-режиме локально:

1. Соберите проект:

```bash
pnpm build
```

2. Запустите продакшен-сервер:

```bash
pnpm start
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

**Примечание:** В продакшен-режиме Next.js оптимизирует код и использует кеширование, поэтому поведение может немного отличаться от режима разработки.

## Структура проекта

```
src/
├── app/                    # Next.js App Router страницы
│   ├── api/               # API routes
│   ├── auth/             # Страницы аутентификации
│   ├── courses/           # Страницы курсов
│   ├── dashboard/         # Личный кабинет
│   ├── admin/             # Административная панель
│   └── learn/             # Страница обучения
├── components/            # React компоненты
├── lib/                   # Утилиты и конфигурация
│   ├── db.ts             # Подключение к БД
│   ├── schema.ts         # Схема Drizzle ORM
│   └── auth-config.ts    # Конфигурация NextAuth
└── types/                # TypeScript типы
```

## Основные функции

### Публичная часть

- Главная страница с популярными курсами
- Каталог курсов с фильтрацией и поиском
- Страница курса с описанием, уроками и отзывами
- Категории обучения

### Авторизованная часть

- Личный кабинет с прогрессом обучения
- Запись на курсы
- Просмотр уроков и отслеживание прогресса
- Отзывы и рейтинги курсов
- Сертификаты об окончании

### Транзакционная почта

- Восстановление пароля через email
- Красивые HTML шаблоны писем

### Административная панель

- Управление курсами
- Управление категориями
- Управление учебными заведениями
- Управление преподавателями
- Модерация отзывов

## Роли пользователей

- **STUDENT** - студент (по умолчанию)
- **ADMIN** - администратор

## API Endpoints

### Аутентификация

- `POST /api/auth/register` - Регистрация
- `POST /api/auth/login` - Вход (через NextAuth)
- `GET /api/auth/me` - Получить текущего пользователя
- `POST /api/auth/forgot-password` - Запрос на восстановление пароля (отправляет письмо)
- `POST /api/auth/reset-password` - Сброс пароля по токену

### Курсы

- `POST /api/courses/[id]/enroll` - Записаться на курс
- `POST /api/progress` - Обновить прогресс урока
- `POST /api/reviews` - Создать/обновить отзыв

## Разработка

### Создание миграций

```bash
pnpm drizzle-kit generate
pnpm drizzle-kit push
```

### Проверка типов

```bash
pnpm tsc --noEmit
```

### Линтинг

```bash
pnpm lint
```

## Лицензия

MIT
